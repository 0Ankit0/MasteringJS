<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Broadcast Channel API Example</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="./index.html">Broadcast Channel API</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="./index.html"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="./BroadcastEx.html"
                >Broadcast Example</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container mt-5">
      <h2>Requirements</h2>
      <ul>
        <li>All contexts must be from the same origin.</li>
        <li>Supported in modern browsers (check compatibility).</li>
      </ul>

      <h2>Limitations</h2>
      <ul>
        <li>Only works with contexts from the same origin.</li>
        <li>Not suitable for large data transfers.</li>
        <li>Limited to simple message passing.</li>
      </ul>

      <h2>Use Case</h2>
      <p>
        The Broadcast Channel API is useful for scenarios where you need to
        communicate between different browsing contexts. For example, you can
        use it to synchronize state between multiple tabs of the same web
        application.
      </p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
      // Page 2 script
      const worker = new SharedWorker("shared-worker.js");
      const broadcastChannel = new BroadcastChannel("shared-worker-channel");

      // Reconnect to the BroadcastChannel to receive messages
      broadcastChannel.onmessage = (event) => {
        alert("Message received in Page 2:", event.data);
      };

      // Start communication with the worker
      worker.port.start();
    </script>
  </body>
</html>
