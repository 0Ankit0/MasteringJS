<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Understanding IntersectionObserver</title>
    <!-- Bootstrap CDN for styling -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="./index.html">DOM Tutorial</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="./DomParser.html">DomParser</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./MutationObserver.html"
                >MutationObserver</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./ResizeObserver.html"
                >ResizeObserver</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./IntersectionObserver.html"
                >IntersectionObserver</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container mt-5">
      <h1 class="text-center">
        Understanding <code>IntersectionObserver</code>
      </h1>
      <p class="lead text-center">
        An explanation, its usage, and real-life web development examples
      </p>

      <!-- Explanation Section -->
      <div class="card mb-5">
        <div class="card-header fs-3">
          What is <code>IntersectionObserver</code>?
        </div>
        <div class="card-body">
          <p>
            <strong><code>IntersectionObserver</code></strong> is a JavaScript
            API that allows you to observe changes in the intersection
            (visibility) of an element with respect to the viewport or a parent
            element. It is often used to determine when an element enters or
            exits the viewport, enabling developers to react to those changes
            efficiently.
          </p>
          <p>
            This API helps with optimizing performance in web applications, such
            as lazy loading images, triggering animations, or implementing
            infinite scrolling features without the need for continuous event
            listeners or expensive scroll event handlers.
          </p>
        </div>
      </div>
      <div class="card mb-5">
        <div class="card-header fs-3">
          <code>IntersectionObserver</code> Parameters
        </div>
        <div class="card-body">
          <p>
            <strong><code>IntersectionObserver</code></strong> takes two
            parameters:
          </p>
          <ul>
            <li>
              <strong>callback</strong> (Function) — The function to be executed
              whenever an intersection change occurs.
            </li>
            <li>
              <strong>options</strong> (Object) — An object that can have
              several properties to control the behavior of the observer.
            </li>
          </ul>

          <h5>1. <code>callback</code> (Function)</h5>
          <p>
            The <code>callback</code> function is called whenever the visibility
            of the observed element changes. It receives two arguments:
          </p>
          <ul>
            <li>
              <strong>entries</strong> — A list of
              <code>IntersectionObserverEntry</code> objects representing the
              elements being observed.
            </li>
            <li>
              <strong>observer</strong> — The
              <code>IntersectionObserver</code> instance that triggered the
              callback.
            </li>
          </ul>

          <h5>2. <code>options</code> (Object)</h5>
          <p>
            The <code>options</code> object can include the following
            properties:
          </p>
          <ul>
            <li>
              <strong><code>root</code></strong> (<code>Element</code> or
              <code>null</code>) — The element used as the viewport for checking
              visibility. Defaults to <code>null</code>, which means the browser
              viewport.
            </li>
            <li>
              <strong><code>rootMargin</code></strong> (<code>string</code>) —
              Similar to CSS <code>margin</code> property, it defines margins
              around the root element. It can trigger the observer before or
              after the element enters the root's bounds. Default is
              <code>'0px'</code>.
            </li>
            <li>
              <strong><code>threshold</code></strong> (<code>number</code> or
              <code>array</code>) — A number or an array of numbers between 0
              and 1 indicating the percentage of the element's visibility
              required to trigger the callback. Default is <code>0</code> (any
              visibility change triggers the callback).
            </li>
          </ul>
          <p>
            <b>Example of <code>options</code> values:</b>
          </p>
          <ul>
            <li><code>root: null</code> — The root is the viewport.</li>
            <li>
              <code>rootMargin: '0px 0px 100px 0px'</code> — The margin of 100px
              is added below the root element.
            </li>
            <li>
              <code>threshold: 0.5</code> — The callback is triggered when 50%
              of the observed element is in view.
            </li>
          </ul>
        </div>
      </div>
      <!-- What It Does Section -->
      <div class="card mb-5">
        <div class="card-header fs-3">
          What Does <code>IntersectionObserver</code> Do?
        </div>
        <div class="card-body">
          <p>
            <strong><code>IntersectionObserver</code></strong> is used to
            monitor the visibility and position of an element relative to the
            viewport or another specified element. The observer triggers a
            callback function when the element's intersection changes—i.e., when
            it enters or exits the viewport or specified boundaries.
          </p>
          <p>This is especially useful for tasks such as:</p>
          <ul>
            <li>Lazy loading images when they come into view.</li>
            <li>
              Infinite scrolling when new content loads when the user scrolls to
              the bottom.
            </li>
            <li>
              Triggering animations or other UI effects when elements are in
              view.
            </li>
          </ul>
        </div>
      </div>

      <!-- Use Cases in Real-Life Web Development -->
      <div class="card mb-5">
        <div class="card-header fs-3">
          Use Cases in Real-Life Web Development
        </div>
        <div class="card-body">
          <h5>1. Lazy Loading of Images</h5>
          <p>
            Lazy loading is a technique where images (or other resources) are
            only loaded when they are about to enter the viewport. This saves
            bandwidth and improves page load times.
          </p>
          <p>
            <strong>Example:</strong> Images in a long article that are only
            loaded when the user scrolls near them.
          </p>

          <h5>2. Infinite Scrolling</h5>
          <p>
            Infinite scrolling allows new content to be loaded automatically
            when the user reaches the bottom of the page, creating a seamless
            scrolling experience.
          </p>
          <p>
            <strong>Example:</strong> A social media feed where new posts appear
            as the user scrolls down the page.
          </p>

          <h5>3. Triggering Animations</h5>
          <p>
            Animations can be triggered when elements come into view, which is
            useful for creating more engaging and interactive user experiences.
          </p>
          <p>
            <strong>Example:</strong> Animating elements when they enter the
            viewport, such as fade-ins, slide-ups, etc.
          </p>
        </div>
      </div>

      <!-- IntersectionObserver Example Code -->
      <div class="card">
        <div class="card-header fs-3">
          Example of Using <code>IntersectionObserver</code>
        </div>
        <div class="card-body observerContainer">
          <p>
            This example demonstrates how to use
            <code>IntersectionObserver</code> to detect when an element enters
            or exits the viewport. As the user scrolls, the background color of
            the observed element will change when it comes into view.
          </p>

          <div class="mb-4">
            <button class="btn btn-primary" id="addElementBtn">
              Add Element
            </button>
          </div>

          <div id="message" class="my-3 text-success"></div>
          <!-- Element to observe for visibility changes -->
          <div
            id="observerElement"
            class="border p-5 mb-3"
            style="height: 200px; background-color: lightblue"
          >
            Scroll down to see the effect. I'm being observed!
          </div>
        </div>
      </div>

      <hr class="mt-5" />
      <footer class="text-center py-4">
        <p>&copy; 2025 Web Development Tutorials</p>
      </footer>
    </div>

    <!-- Bootstrap Icons CDN (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.js"></script>

    <script>
      // Select the element to observe
      const observerElement = document.getElementById("observerElement");
      const messageDiv = document.getElementById("message");
      const addElementBtn = document.getElementById("addElementBtn");

      // Initialize the IntersectionObserver
      const intersectionObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.style.backgroundColor = "lightgreen";
              messageDiv.textContent = "The new element is now in view!";
            } else {
              entry.target.style.backgroundColor = "lightblue";
              messageDiv.textContent = "The new element is out of view!";
            }
          });
        },
        { threshold: 0.5 }
      );

      // Start observing the element
      intersectionObserver.observe(observerElement);

      // Event listener to add a new element to observe when the button is clicked
      addElementBtn.addEventListener("click", () => {
        const newElement = document.createElement("div");
        newElement.classList.add("border", "p-5", "mb-3");
        newElement.style.height = "200px";
        newElement.style.backgroundColor = "lightblue";
        newElement.textContent = "New element to observe!";

        document.querySelector(".observerContainer").appendChild(newElement);

        // Start observing the new element
        intersectionObserver.observe(newElement);
      });
    </script>
  </body>
</html>
